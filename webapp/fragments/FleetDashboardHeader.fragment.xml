<core:FragmentDefinition xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:f="sap.f"
    xmlns:mc="sap.suite.ui.microchart">
    <VBox width="100%" class="sapUiSmallMarginBeginEnd sapUiSmallMarginTop sapUiMediumMarginBottom">

        <!-- KPI Row -->
        <HBox id="fleetSummaryKpiRow"
            width="100%"
            wrap="Wrap"
            justifyContent="Start"
            class="fleetKpiRow sapUiSmallMarginBottom">
            <!-- Gasto combustível -->
            <items>
                <VBox class="kpiBlock">
                    <layoutData>
                        <FlexItemData baseSize="18rem" growFactor="1"/>
                    </layoutData>
                    <HBox class="kpiBlockHeader" alignItems="Start" justifyContent="SpaceBetween">
                        <HBox alignItems="Center">
                            <Avatar displayShape="Circle"
                                displaySize="S"
                                backgroundColor="Transparent"
                                src="sap-icon://gas-station"/>
                            <VBox class="sapUiTinyMarginBegin">
                                <ObjectNumber number="{FleetSummary>/fuelSpend/value}"
                                    unit="{FleetSummary>/fuelSpend/unit}"
                                    emphasized="true"
                                    state="{FleetSummary>/fuelSpend/state}"/>
                                <Text text="{FleetSummary>/fuelSpend/title}"/>
                                <Text text="{FleetSummary>/fuelSpend/subtitle}" wrapping="false"/>
                            </VBox>
                        </HBox>
                        <core:InvisibleText text="{FleetSummary>/fuelSpend/tag/tooltip}"/>
                    </HBox>
                </VBox>

                <!-- Litros totais -->
                <VBox class="kpiBlock">
                    <layoutData>
                        <FlexItemData baseSize="18rem" growFactor="1"/>
                    </layoutData>
                    <HBox class="kpiBlockHeader" alignItems="Start" justifyContent="SpaceBetween">
                        <HBox alignItems="Center">
                            <Avatar displayShape="Circle"
                                displaySize="S"
                                backgroundColor="Transparent"
                                src="sap-icon://filter-fuel"/>
                            <VBox class="sapUiTinyMarginBegin">
                                <ObjectNumber number="{FleetSummary>/totalLiters/value}"
                                    unit="{FleetSummary>/totalLiters/unit}"
                                    emphasized="true"
                                    state="{FleetSummary>/totalLiters/state}"/>
                                <Text text="{FleetSummary>/totalLiters/title}"/>
                                <Text text="{FleetSummary>/totalLiters/subtitle}" wrapping="false"/>
                            </VBox>
                        </HBox>
                        <core:InvisibleText text="{FleetSummary>/totalLiters/tag/tooltip}"/>
                    </HBox>
                </VBox>

                <!-- Custo material/serviço -->
                <VBox class="kpiBlock">
                    <layoutData>
                        <FlexItemData baseSize="18rem" growFactor="1"/>
                    </layoutData>
                    <HBox class="kpiBlockHeader" alignItems="Start" justifyContent="SpaceBetween">
                        <HBox alignItems="Center">
                            <Avatar displayShape="Circle"
                                displaySize="S"
                                backgroundColor="Transparent"
                                src="sap-icon://wrench"/>
                            <VBox class="sapUiTinyMarginBegin">
                                <ObjectNumber number="{FleetSummary>/serviceCost/value}"
                                    unit="{FleetSummary>/serviceCost/unit}"
                                    emphasized="true"
                                    state="{FleetSummary>/serviceCost/state}"/>
                                <Text text="{FleetSummary>/serviceCost/title}"/>
                                <Text text="{FleetSummary>/serviceCost/subtitle}" wrapping="false"/>
                            </VBox>
                        </HBox>
                        <core:InvisibleText text="{FleetSummary>/serviceCost/tag/tooltip}"/>
                    </HBox>
                </VBox>

                <!-- Preço médio/L -->
                <VBox class="kpiBlock">
                    <layoutData>
                        <FlexItemData baseSize="18rem" growFactor="1"/>
                    </layoutData>
                    <HBox class="kpiBlockHeader" alignItems="Start" justifyContent="SpaceBetween">
                        <HBox alignItems="Center">
                            <Avatar displayShape="Circle"
                                displaySize="S"
                                backgroundColor="Transparent"
                                src="sap-icon://competitor"/>
                            <VBox class="sapUiTinyMarginBegin">
                                <ObjectNumber number="{FleetSummary>/avgPrice/value}"
                                    unit="{FleetSummary>/avgPrice/unit}"
                                    emphasized="true"
                                    state="{FleetSummary>/avgPrice/state}"/>
                                <Text text="{FleetSummary>/avgPrice/title}"/>
                                <Text text="{FleetSummary>/avgPrice/subtitle}" wrapping="false"/>
                            </VBox>
                        </HBox>
                        <core:InvisibleText text="{FleetSummary>/avgPrice/tag/tooltip}"/>
                    </HBox>
                </VBox>
            </items>
        </HBox>

        <!-- Filters Row -->
        <OverflowToolbar id="fleetSummaryFilterBar"
            width="100%"
            design="Transparent"
            style="Clear">
            <Label text="Categoria" labelFor="segCat"/>
            <MultiComboBox id="segCat"
                width="16rem"
                placeholder="Filtrar categorias"
                showSelectAll="true"
                showSecondaryValues="false"
               
                selectedKeys="{FleetFilters>/selectedCategories}"
                selectionFinish=".onFilterChange"
                selectionChange=".onMultiCategoryChange"
                showClearIcon="true"
                items="{
                    path: 'FleetFilters>/categories'
                }">
                <core:ListItem key="{FleetFilters>key}"
                    text="{FleetFilters>text}"
                    additionalText="{FleetFilters>group}"/>
            </MultiComboBox>

            <Label text="Veículos" labelFor="inpVeiculo"/>
            <MultiComboBox id="inpVeiculo"
                width="18rem"
                placeholder="Filtrar veículos"
                showSelectAll="true"
                showSecondaryValues="false"
               
                selectedKeys="{FleetFilters>/selectedVehicles}"
                selectionFinish=".onFilterChange"
                selectionChange=".onMultiVehicleChange"
                showClearIcon="true"
                items="{
                    path: 'FleetFilters>/vehicles'
                }">
                <core:ListItem key="{FleetFilters>key}"
                    text="{FleetFilters>text}"
                    additionalText="{FleetFilters>secondary}"/>
            </MultiComboBox>

            <Label text="Período" labelFor="drs"/>
            <DateRangeSelection id="drs"
                width="17rem"
                displayFormat="dd/MM/yyyy"
                delimiter=" - "
                change=".onFilterChange"/>

            <ToolbarSpacer/>

            <Button text="Limpar" type="Transparent" press=".onClearFilters"/>
            <Button icon="sap-icon://action-settings"
                type="Transparent"
                tooltip="Configurações de exibição"
                press=".onOpenSettings"/>
        </OverflowToolbar>
    </VBox>
</core:FragmentDefinition>
