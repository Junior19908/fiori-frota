<?xml version="1.0" encoding="UTF-8"?>
<mvc:View
  controllerName="com.skysinc.frota.frota.controller.ManageAbastecimentos"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  displayBlock="true">
  <Page
    id="manageAbastPage"
    title="Gerenciar Abastecimentos"
    class="sapUiContentPadding"
    showNavButton="true"
    navButtonPress="onNavBack">
    <customHeader>
      <Toolbar>
        <ToolbarSpacer/>
        <Label text="Mes (YYYY-MM)"/>
        <Input id="inpMonth" width="10rem" placeholder="2025-02"/>
        <Button text="Carregar" type="Emphasized" press="onLoad"/>
        <ToolbarSpacer/>
        <ObjectStatus text="{= ${ab>/schema} ? ('Schema: ' + ${ab>/schema}) : 'Schema: v1'}" state="None"/>
        <Button text="Migrar p/ V2" type="Attention" press="onMigrateToV2" visible="{= ${ab>/schema} !== 'v2' }"/>
        <ToolbarSpacer/>
      </Toolbar>
    </customHeader>
    <content>
      <Toolbar design="Auto">
        <Button id="btnDeleteSel" text="Excluir selecionados" type="Reject" press="onDeleteSelected" enabled="{= ${ab>/items}.length > 0 }"/>
        <ToolbarSpacer/>
        <Button id="btnDeleteMonth" text="Excluir mes inteiro" type="Reject" press="onDeleteMonth"/>
      </Toolbar>
      <Table id="tblEvents" mode="MultiSelect" items="{ab>/pagedItems}">
        <columns>
          <Column><Text text="Veiculo"/></Column>
          <Column><Text text="Data"/></Column>
          <Column><Text text="Hora"/></Column>
          <Column><Text text="KM"/></Column>
          <Column><Text text="HR"/></Column>
          <Column><Text text="Litros"/></Column>
          <Column><Text text="Comboio"/></Column>
          <Column><Text text="idEvento"/></Column>
        </columns>
        <items>
          <ColumnListItem type="Inactive">
            <cells>
              <Text text="{ab>veiculo}"/>
              <Text text="{ab>data}"/>
              <Text text="{ab>hora}"/>
              <Text text="{ab>km}"/>
              <Text text="{ab>hr}"/>
              <Text text="{ab>litros}"/>
              <Text text="{ab>comboio}"/>
              <Text text="{ab>idEvento}"/>
            </cells>
          </ColumnListItem>
        </items>
      </Table>
      <!-- Controles de paginacao -->
      <Toolbar design="Transparent">
        <Label text="Itens por pagina"/>
        <Select id="selPageSize" selectedKey="{ab>/pageSize}" change=".onPageSizeChange" width="8rem">
          <core:Item key="25" text="25"/>
          <core:Item key="50" text="50"/>
          <core:Item key="100" text="100"/>
          <core:Item key="200" text="200"/>
        </Select>
        <ToolbarSpacer/>
        <Text text="{= 'Mostrando ' + ${ab>/from} + ' - ' + ${ab>/to} + ' de ' + ${ab>/totalCount} }"/>
        <ToolbarSpacer/>
        <Button icon="sap-icon://begin" type="Transparent" tooltip="Primeira pagina" press=".onPageFirst" enabled="{= ${ab>/page} > 1 }"/>
        <Button icon="sap-icon://slim-arrow-left" type="Transparent" tooltip="Anterior" press=".onPagePrev" enabled="{= ${ab>/page} > 1 }"/>
        <ObjectStatus text="{= 'Pagina ' + ${ab>/page} + ' de ' + ${ab>/totalPages} }" state="None"/>
        <Button icon="sap-icon://slim-arrow-right" type="Transparent" tooltip="Proxima" press=".onPageNext" enabled="{= ${ab>/page} < ${ab>/totalPages} }"/>
        <Button icon="sap-icon://end" type="Transparent" tooltip="Ultima pagina" press=".onPageLast" enabled="{= ${ab>/page} < ${ab>/totalPages} }"/>
      </Toolbar>
    </content>
  </Page>
</mvc:View>

