<?xml version="1.0" encoding="UTF-8"?>
<mvc:View
  controllerName="com.skysinc.frota.frota.controller.Settings"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  xmlns:f="sap.ui.layout.form"
  xmlns:unified="sap.ui.unified"
  displayBlock="true">

  <Page id="settingsPage" title="{i18n>settings.title}" class="sapUiContentPadding" showFooter="true">
    <content>
      <VBox width="100%" renderType="Bare">
        <f:SimpleForm editable="true"
          layout="ResponsiveGridLayout"
          width="100%"
          labelSpanXL="3" labelSpanL="3" labelSpanM="4" labelSpanS="12"
          adjustLabelSpan="false" emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0"
          columnsXL="2" columnsL="1" columnsM="1">

          <Label text="{i18n>settings.showAllOS}"/>
          <HBox>
            <Switch id="swShowAll" state="{settings>/showAllOS}" change=".onLiveChange"/>
            <Text id="txShowAll" text="&#160;&#160;{= ${settings>/showAllOS} ? ${i18n>common.yes} : ${i18n>common.no} }"/>
          </HBox>

          <Label text="{i18n>settings.osTypes}"/>
          <MultiComboBox id="mcOsTypes" width="100%" selectionChange=".onLiveChange" selectedKeys="{settings>/osTypes}">
            <core:Item key="ZF01" text="ZF01 - Projeto / Melhoria / Reforma"/>
            <core:Item key="ZF02" text="ZF02 - Corretiva"/>
            <core:Item key="ZF03" text="ZF03 - Preventiva Básica/Mecânica"/>
          </MultiComboBox>

          <Label text="{i18n>settings.autoLoadMain}"/>
          <HBox>
            <Switch id="swAutoLoad" state="{settings>/autoLoadMain}" change=".onAutoLoadToggle"/>
            <Text id="txAutoLoad" text="&#160;&#160;{= ${settings>/autoLoadMain} ? ${i18n>common.yes} : ${i18n>common.no} }"/>
          </HBox>

          <Label text="{i18n>settings.autoLoadInterval}"/>
          <HBox id="hbInterval" visible="{settings>/autoLoadMain}">
            <StepInput id="stepInterval" value="{settings>/autoLoadIntervalSec}" min="5" max="3600" step="5" change=".onLiveChange"/>
            <Text text="&#160;{i18n>common.secondsShort}"/>
          </HBox>

          <Label text="{i18n>settings.mainDatePref}"/>
          <SegmentedButton id="sbDatePref" selectedKey="{settings>/mainDatePref}" selectionChange=".onLiveChange">
            <items>
              <SegmentedButtonItem key="today" text="{i18n>date.today}"/>
              <SegmentedButtonItem key="yesterday" text="{i18n>date.yesterday}"/>
            </items>
          </SegmentedButton>

          <HBox>
          </HBox>

          <Label text="{i18n>settings.theme}"/>
          <Select id="selTheme" selectedKey="{settings>/theme}" change=".onThemeChange" width="100%">
            <core:Item key="sap_horizon" text="{i18n>theme.horizon}"/>
            <core:Item key="sap_horizon_dark" text="{i18n>theme.horizon_dark}"/>
            <core:Item key="sap_horizon_hcb" text="{i18n>theme.hcb}"/>
            <core:Item key="sap_horizon_hcw" text="{i18n>theme.hcw}"/>
            <core:Item key="sap_fiori_3" text="{i18n>theme.fiori3}"/>
            <core:Item key="sap_fiori_3_dark" text="{i18n>theme.fiori3_dark}"/>
          </Select>

          <Label text="{i18n>settings.import}"/>
          <HBox alignItems="Center" justifyContent="Start" width="100%" wrap="Wrap">
            <unified:FileUploader id="settingsFileUploader"
                                  buttonText="{i18n>settings.import.selectFiles}"
                                  fileType="json"
                                  change=".onSettingsFileUploadBatch"
                                  multiple="true"
                                  width="100%"/>
            <Button text="{i18n>settings.import.saveToFirestore}" type="Emphasized" press=".onSaveImportedJson" class="sapUiTinyMarginBegin"/>
          </HBox>

          <Label text="{i18n>settings.firebase}"/>
          <VBox class="sapUiSmallMarginBottom">
            <HBox>
              <Button text="{i18n>settings.firebase.test}" type="Transparent" press=".onTestFirebase"/>
              <Button text="{i18n>settings.firebase.createTestCollection}" type="Transparent" press=".onCreateTestCollection" class="sapUiTinyMarginBegin"/>
            </HBox>
            <HBox class="sapUiTinyMarginTop" alignItems="Center">
              <Button text="{i18n>settings.firebase.exportCurrentMonth}" type="Emphasized" press=".onExportCurrentMonth"/>
            </HBox>
            <HBox class="sapUiTinyMarginTop" alignItems="Center">
              <Text text="{i18n>settings.firebase.exportLast}"/>
              <StepInput id="stepExportN" min="1" max="36" step="1" value="6" class="sapUiTinyMarginBegin"/>
              <Text text="{i18n>settings.firebase.months}" class="sapUiTinyMarginBegin"/>
              <Button text="{i18n>settings.firebase.export}" type="Transparent" press=".onExportLastNMonths" class="sapUiTinyMarginBegin"/>
            </HBox>

            <HBox class="sapUiTinyMarginTop" alignItems="Center">
              <Button text="Importar OS (Excel)" type="Transparent" press=".onOpenImportOS"/>
              <Button text="Importar Abastecimentos (Excel)" type="Transparent" press=".onOpenImportAbast"/>
              <Button text="Gerenciar Abastecimentos" type="Transparent" press=".onOpenManageAbast"/>
            </HBox>
          </VBox>

        </f:SimpleForm>
      </VBox>
    </content>

    <footer>
      <Toolbar>
        <ToolbarSpacer/>
        <Button id="btnRestore" text="{i18n>common.restoreDefaults}" type="Transparent" press=".onRestoreDefaults"/>
        <Button id="btnSave" text="{i18n>common.save}" type="Emphasized" press=".onSave"/>
      </Toolbar>
    </footer>
  </Page>
</mvc:View>






