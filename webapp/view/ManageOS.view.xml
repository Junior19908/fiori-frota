<?xml version="1.0" encoding="UTF-8"?>
<mvc:View
  controllerName="com.skysinc.frota.frota.controller.ManageOS"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  displayBlock="true">
  <Page id="manageOSPage" title="Gerenciar OS" class="sapUiContentPadding" showNavButton="true" navButtonPress="onNavBack">
    <customHeader>
      <Toolbar>
        <ToolbarSpacer/>
        <Label text="Período"/>
        <DateRangeSelection id="drs" displayFormat="yyyy-MM-dd" delimiter=" a "/>
        <Button text="Carregar" type="Emphasized" press="onLoad"/>
        <ToolbarSpacer/>
      </Toolbar>
    </customHeader>
    <content>
      <Toolbar design="Auto">
        <Button id="btnDeleteSel" text="Excluir selecionadas" type="Reject" press="onDeleteSelected"/>
        <ToolbarSpacer/>
        <Button id="btnDeleteFilter" text="Excluir por filtro" type="Reject" press="onDeleteFilteredConfirm"/>
        <ToolbarSeparator/>
        <Button id="btnExportOpen" text="Exportar OS em aberto" type="Accept" press="onExportOpen"/>
        <Button id="btnExportPage" text="Exportar página" type="Transparent" press="onExportPage"/>
      </Toolbar>
      <Toolbar design="Auto">
        <Button id="btnPrev" text="Anterior" type="Transparent" press="onPrevPage" enabled="{= ${os>/page/hasPrev} }"/>
        <Text text="{= ${os>/page/pageText} || 'Página 1'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd"/>
        <Text text="{= ${os>/page/totalPages} ? ('de ' + ${os>/page/totalPages}) : '' }" class="sapUiTinyMarginEnd"/>
        <Button id="btnNext" text="Próxima" type="Transparent" press="onNextPage" enabled="{= ${os>/page/hasNext} }"/>
        <ToolbarSpacer/>
        <ObjectStatus text="{= 'Itens na página: ' + (${os>/total} || 0) + '  |  Página: ' + ((${os>/page/index}||1)) + ' de ' + ((${os>/page/totalPages} || '?')) + '  (tam. ' + ((${os>/page/size}||100)) + ')' }"/>
      </Toolbar>
      <Table id="tblOS" mode="MultiSelect" items="{os>/items}">
        <columns>
          <Column><Text text="Veículo"/></Column>
          <Column><Text text="OS"/></Column>
          <Column width="20rem"><Text text="Título"/></Column>
          <Column><Text text="Abertura"/></Column>
          <Column><Text text="Hora Início"/></Column>
          <Column><Text text="Fechamento"/></Column>
          <Column><Text text="Hora Fim"/></Column>
          <Column><Text text="Tipo Manual"/></Column>
          <Column hAlign="End"><Text text="Ações"/></Column>
        </columns>
        <items>
          <ColumnListItem type="Inactive">
            <cells>
              <Text text="{os>Equipamento}"/>
              <Text text="{os>NumeroOS}"/>
              <Text text="{os>Descricao}"/>
              <Text text="{path: 'os>DataAbertura', formatter: '.fmtYmd'}"/>
              <Text text="{os>HoraInicio}"/>
              <Text text="{path: 'os>DataFechamento', formatter: '.fmtYmd'}"/>
              <Text text="{os>HoraFim}"/>
              <Text text="{os>TipoManual}"/>
              <Button icon="sap-icon://delete" type="Reject" tooltip="Excluir" press="onDeleteOne"/>
            </cells>
          </ColumnListItem>
        </items>
      </Table>
    </content>
  </Page>
  
</mvc:View>
